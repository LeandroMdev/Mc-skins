<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" type="image/png" href="image.png">
    <meta charset="UTF-8">
    <title>MC Skin Uploader_V1</title>
    <link rel="stylesheet" href="styles.css">
   
</head>
<body>
    <div class="backs">
        <div class="banner">
            <img src="image copy.png" alt="Web_banner">
        </div>
        
        <h1>Subir Skin de Minecraft</h1>

        <div class="upload-card">
            <label for="skinInput" class="custom-file-label">
                üìÇ Seleccionar Skin (.png)
            </label>
            
            <input type="file" id="skinInput" accept="image/png" onchange="mostrarNombre()">
            
            <span id="file-name">Ning√∫n archivo seleccionado</span>
            
            <button class="btn-upload" onclick="subirImagen()">Subir a GitHub</button>
        </div>
    </div>

    <script>
        // Funci√≥n para actualizar el texto debajo
        function mostrarNombre() {
            const input = document.getElementById('skinInput');
            const fileNameDisplay = document.getElementById('file-name');
            if (input.files.length > 0) {
                fileNameDisplay.innerText = "‚úÖ Listo: " + input.files[0].name;
                fileNameDisplay.style.color = "darkgreen";
            }
        }

        async function subirImagen() {
    const fileInput = document.getElementById('skinInput');
    if (fileInput.files.length === 0) {
        alert("Primero selecciona una skin, bro.");
        return;
    }

    const formData = new FormData();
    formData.append('skin', fileInput.files[0]);

    try {
        const res = await fetch('/api/upload', { method: 'POST', body: formData });
        const data = await res.json();

        // 1. Verificamos si la respuesta trae la URL que configuramos en Python
        if (data.url) {
            alert("üöÄ " + data.message + "\n\nLink: " + data.url);
            
            // Opcional: Esto copia el link al portapapeles autom√°ticamente
            navigator.clipboard.writeText(data.url);
            console.log("Skin disponible en:", data.url);
        } else {
            // 2. Si hubo un error (como el SHA o el Token)
            alert("‚ùå Error: " + (data.error || "Algo fall√≥ al subir"));
        }

    } catch (err) {
        alert("Error cr√≠tico conectando con la API");
        console.error(err);
    }
}
    </script>
</body>
</html>
